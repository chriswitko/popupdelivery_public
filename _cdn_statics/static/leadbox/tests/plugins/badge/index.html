<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8">
	<title>PopupDelivery.com - Reminder</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="css/spectre.css">  
	<link rel="stylesheet" href="css/basic.css">  
	<link rel="stylesheet" href="css/popper.css">  
	<link rel="stylesheet" href="css/owl.css">  
	<link rel="stylesheet" href="css/animated.css">

	<script src="js/modernizr.js"></script>   	
</head>
<body>
	<div id="tinylead-content-wrapper" class="tinylead-content-wrapper">
		<div class="col-xs-12">
			<div class="reminder-button-area">
				<div class="title" onclick="toggleReminder()">
					My Products (2) <span style="float:right;display:none;" id="close-button">&times;</span>
				</div>
			</div>
		</div>
		<div class="col-xs-12">
			<div id="reminder_content" style="clear:both;float:left;width:100%;display:none;background-color:white;border-top:1px solid #1492ef;box-shadow: 0 -5px 5px -5px #333;padding:15px;">
				<div class="col-xs-12 tagline"><h5>Your recently viewed items and futured recommendations &middot; <a class="inactive" href onclick="clickOnBadge()">Clear history</a></h5></div>

				<div class="owl-carousel float-left">
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51Npx2i3cQL._SY346_.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>
					<div class="item">
						<div class="item-img">
							<img src="https://images-eu.ssl-images-amazon.com/images/I/51SM1zlK4eL.jpg" height="100%"/>
						</div>
						<div class="col-xs-12">
							<p class="item-body">Sample title<br/><span class="price">$20.00</span></p>
						</div>
					</div>

				</div>			
			</div>
		</div>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

	<script type="text/javascript" src="js/popper.js"></script>
	<script src="js/owl.js"></script>
<script>
	var popper = null;
	var opened = false;
	var owl = $('.owl-carousel');
	var content_element = document.getElementById('tinylead-content-wrapper');
	var reminder_content = document.getElementById('reminder_content');
	var close_button = document.getElementById('close-button');

	$(document).ready(function(){
	
		$.fn.extend({
				animateCss: function (animationName) {
						var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
						$(this).addClass('animated ' + animationName).one(animationEnd, function() {
								$(this).removeClass('animated ' + animationName);
								popper = new Popper(document.querySelector('.reminder-button-area'), {content: 'Quick access to products'}, {
									placement: 'top-start',
									boundariesElement: document.querySelector('.tinylead-content-wrapper')
								});
								
						});
				}
		});

		owl.on('initialize.owl.carousel initialized.owl.carousel ' +
			'initialize.owl.carousel initialize.owl.carousel ' +
			'resize.owl.carousel resized.owl.carousel ' +
			'refresh.owl.carousel refreshed.owl.carousel ' +
			'update.owl.carousel updated.owl.carousel ' +
			'drag.owl.carousel dragged.owl.carousel ' +
			'translate.owl.carousel translated.owl.carousel ' +
			'to.owl.carousel changed.owl.carousel', function(e) {
			if(e.type === 'initialized' || e.type === 'resized') {
				resize();
			}
		});

		tinyLeadGetSize(function(dW, dH, w, h) {
			owl.owlCarousel({
				animateOut: 'fadeOut',
				margin: 0,
				nav: true,
				loop: true,
				items: Math.floor(w / 150) - 1,
				responsive: {
					0: {
						items: 3
					},
					600: {
						items: 3
					},
					1000: {
						items: 10
					}
				}
			});
		});

		$('.title').animateCss('slideInUp');
	});

	function tinyLeadGetSize(callback) {
		var body = window.document.body,
			doc = window.document.documentElement,
			documentWidth = Math.max(body.scrollWidth, doc.scrollWidth,
				body.offsetWidth, doc.offsetWidth,
				doc.clientWidth),
			documentHeight = Math.max(body.scrollHeight, doc.scrollHeight,
				body.offsetHeight, doc.offsetHeight,
				doc.clientHeight),
			viewportWidth = window.innerWidth || doc.clientWidth ||
			body.clientWidth,
			viewportHeight = window.innerHeight || doc.clientWidth ||
			body.clientWidth;

		var workaround = window.setTimeout(function() {
			workaround = null;
				window.clearTimeout(workaround);
			callback(documentWidth, documentHeight, viewportWidth,
				viewportHeight);
		}, 100);
	}

	function clickOnBadge() {
		if(window.parent) {
			window.parent.postMessage({type:"hellobadge", value: {text: 'chris'}},"*");
		}
	}

	function resize() {
		try{ 
			if(window.parent) window.parent.postMessage({type:"resize", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		} catch(e) {
			if(window.parent) window.parent.postMessage({type:"resize", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		}	
	}

	function toggleReminder() {
		return opened ? closeReminder() : openReminder();
	};

	function openReminder() {
		$(popper._popper).hide();
		console.log('popper', popper);
		opened = true;
		reminder_content.style.display = 'block';
		close_button.style.display = 'block';
		try {
			if(window.parent) window.parent.postMessage({type:"open_reminder", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		} catch(e) {
			if(window.parent) window.parent.postMessage({type:"open_reminder", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		}	
	}

	function closeReminder() {
		$(popper._popper).show();
		opened = false;
		reminder_content.style.display = 'none';
		close_button.style.display = 'none';
		try {
			if(window.parent) window.parent.postMessage({type:"close_reminder", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		} catch(e) {
			if(window.parent) window.parent.postMessage({type:"close_reminder", value: {width: content_element.clientWidth, height: content_element.clientHeight}},"*");
		}	
	}	

	
</script>
</body>
</html>